(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){"use strict";t.r(n);var r=t(14),c=t.n(r),a=t(3),o=t(2),u=t(0),i=function(e){var n=e.handleFilterName;return Object(u.jsxs)("div",{children:["filter shown with: ",Object(u.jsx)("input",{type:"text",onChange:n})]})},s=function(e){var n=e.handleSubmit,t=e.newName,r=e.handleNameChange,c=e.newNumber,a=e.handleNumberChange;return Object(u.jsxs)("form",{onSubmit:n,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:t,onChange:r})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:c,onChange:a})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},l=function(e){var n=e.flag,t=e.persons,r=e.filterPersons,c=e.handleDelete;return n?Object(u.jsx)("div",{children:r.map((function(e){return Object(u.jsxs)("div",{children:[e.name," ",e.number,Object(u.jsx)("button",{onClick:function(){return c(e)},children:"delete"})]},e.id)}))}):Object(u.jsx)("div",{children:t.map((function(e){return Object(u.jsxs)("div",{children:[e.name," ",e.number,Object(u.jsx)("button",{onClick:function(){return c(e)},children:"delete"})]},e.id)}))})},d=t(4),b=t.n(d),f="/api/persons",j={getAll:function(){return b.a.get(f).then((function(e){return e.data}))},create:function(e){return b.a.post(f,e).then((function(e){return e.data}))},deletePerson:function(e){return b.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))},update:function(e,n){return b.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))}},h=function(e){var n=e.message;return null===n?null:Object(u.jsx)("div",{style:{color:"green",fontWeight:"bold",borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10,background:"lightgrey"},children:n})},m=function(){var e=Object(o.useState)([]),n=Object(a.a)(e,2),t=n[0],r=n[1],c=Object(o.useState)(""),d=Object(a.a)(c,2),b=d[0],f=d[1],m=Object(o.useState)(""),O=Object(a.a)(m,2),p=O[0],x=O[1],g=Object(o.useState)(!1),v=Object(a.a)(g,2),w=v[0],C=v[1],N=Object(o.useState)([]),y=Object(a.a)(N,2),S=y[0],k=y[1],P=Object(o.useState)("no error presently"),T=Object(a.a)(P,2),D=T[0],A=T[1];Object(o.useEffect)((function(){j.getAll().then((function(e){r(e)}))}),[]);return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(h,{message:D}),Object(u.jsx)(i,{handleFilterName:function(e){var n=e.target.value.toLowerCase(),r=t.filter((function(e){return e.name.toLowerCase().indexOf(n)>=0}));k(r),C(!0)}}),Object(u.jsx)("h2",{children:"add a new"}),Object(u.jsx)(s,{handleSubmit:function(e){e.preventDefault();var n=t.map((function(e){return e.name})),c={name:b,number:p};if(n.indexOf(b)>=0){if(window.confirm("".concat(b," is already added to phonebook, replace the old number with a new one?"))){var a=t.find((function(e){return e.name===b}));j.update(a.id,c).then((function(e){r(t.map((function(n){return n.name!==b?n:e}))),A("".concat(b,"'number is replaced")),setTimeout((function(){A(null)}),5e3)})).catch((function(e){400===e.response.status?A(e.response.data.error):(A("".concat(b," has already been deleted from server")),r(t.filter((function(e){return e.name!==b})))),setTimeout((function(){A(null)}),5e3)}))}}else j.create(c).then((function(e){r(t.concat(e)),C(!1),A("".concat(b," is added successfully")),setTimeout((function(){A(null)}),5e3)})).catch((function(e){A(e.response.data.error),setTimeout((function(){A(null)}),5e3)}))},newName:b,handleNameChange:function(e){f(e.target.value)},newNumber:p,handleNumberChange:function(e){x(e.target.value)}}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(l,{flag:w,persons:t,filterPersons:S,handleDelete:function(e){window.confirm("Delete ".concat(e.name,"?"))&&j.deletePerson(e.id).then((function(){r(t.filter((function(n){return n.id!==e.id}))),A("".concat(e.name," is deleted")),setTimeout((function(){A(null)}),5e3)})).catch((function(e){return console.log(e)}))}})]})};c.a.render(Object(u.jsx)(m,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.775c31ae.chunk.js.map